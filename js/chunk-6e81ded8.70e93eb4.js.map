{"version":3,"sources":["webpack:///./src/views/game/components/Floor.vue?5a32","webpack:///./src/views/game/components/Config.vue?fb52","webpack:///./src/views/game/components/GameMap.vue?d71b","webpack:///./src/views/game/components/Fail.vue?d2aa","webpack:///./src/views/game/index.vue?a020","webpack:///./src/views/game/components/Floor.vue","webpack:///./src/views/game/components/Floor.vue?02d0","webpack:///./src/views/game/components/Figure.vue","webpack:///./src/views/game/components/Figure.vue?154f","webpack:///./src/views/game/components/Enemy.vue","webpack:///./src/views/game/components/Enemy.vue?093f","webpack:///./src/views/game/components/Score.vue","webpack:///./src/views/game/components/Score.vue?3287","webpack:///./src/views/game/components/Config.vue","webpack:///./src/views/game/components/Config.vue?4d60","webpack:///./src/views/game/components/Fail.vue","webpack:///./src/views/game/components/Fail.vue?04f5","webpack:///./src/views/game/components/GameMap.vue","webpack:///./src/views/game/components/GameMap.vue?0446","webpack:///./src/views/game/index.vue","webpack:///./src/views/game/index.vue?ce4a","webpack:///./src/views/game/components/Enemy.vue?ff01","webpack:///./src/views/game/components/Figure.vue?3741","webpack:///./src/views/game/components/Score.vue?7584"],"names":["store","useStore","brick","computed","state","game","watch","value","val","oldVal","start","document","getElementById","classList","add","remove","onMounted","style","animationDuration","speed","__exports__","jumpUp","ref","jumpDown","jumpHeight","jumpPoor","figure","score","deep","figureJump","bottom","requestAnimationFrame","figureDown","height","cancelAnimationFrame","moveFn","e","keyCode","setTimeout","figureDom","addEventListener","onBeforeRouteLeave","to","from","removeEventListener","enemy","enemyClone","attack","currentLeft","successAttack","right","offsetLeft","maxScore","commit","resetAttack","finalScore","speedAdd","ElNotification","title","message","type","duration","enemyPush","mapWidth","offsetWidth","width","jumpFn","enemyDom","loadsh","cloneDeep","gameClone","handleStart","handleReStart","stateClone"],"mappings":"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","file":"js/chunk-6e81ded8.70e93eb4.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Floor.vue?vue&type=style&index=0&id=9dfea6b2&lang=scss&scoped=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Config.vue?vue&type=style&index=0&id=254013fc&lang=scss&scoped=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./GameMap.vue?vue&type=style&index=0&id=10388f0b&lang=scss&scoped=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Fail.vue?vue&type=style&index=0&id=00a46d30&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=d9eb85fa&lang=scss&scoped=true\"","<template>\r\n  <!-- 地板 -->\r\n  <div class=\"flex absolute bottom-0\" id=\"floor\">\r\n    <div class=\"flex\">\r\n      <div\r\n        class=\"brick\"\r\n        :style=\"{ width: brick.width + 'px', height: brick.height + 'px', backgroundColor: brick.bgColor, order: 0 }\"\r\n        v-for=\"item in brick.total\"\r\n        :key=\"item\"\r\n      ></div>\r\n    </div>\r\n    <div class=\"flex\">\r\n      <div\r\n        class=\"brick splice\"\r\n        :style=\"{ width: brick.width + 'px', height: brick.height + 'px', backgroundColor: brick.bgColor, order: 1 }\"\r\n        v-for=\"item in brick.total\"\r\n        :key=\"item\"\r\n      ></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, computed, watch } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nconst store = useStore();\r\n\r\nconst brick = computed(() => store.state.game.brick);\r\nconst game = computed(() => store.state.game.game);\r\n\r\nwatch(game.value, (val, oldVal) => {\r\n  if (game.value.start) {\r\n    document.getElementById(\"floor\").classList.add(\"floorMove\");\r\n  } else {\r\n    document.getElementById(\"floor\").classList.remove(\"floorMove\");\r\n  }\r\n});\r\n\r\nonMounted(() => {\r\n  document.getElementById(\"floor\").classList.add(\"floorMove\");\r\n  document.getElementById(\"floor\").style.animationDuration = brick.value.speed + \"s\";\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.brick {\r\n  border-top: 1px solid;\r\n  border-right: 1px solid;\r\n}\r\n\r\n@keyframes FloorMove {\r\n  from {\r\n    transform: translateX(0px);\r\n  }\r\n  to {\r\n    transform: translateX(-840px);\r\n  }\r\n}\r\n\r\n// 地板滚动\r\n.floorMove {\r\n  animation: FloorMove linear infinite;\r\n}\r\n\r\n// 地板暂停\r\n.floorPause {\r\n  animation-play-state: paused;\r\n}\r\n</style>\r\n","import script from \"./Floor.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Floor.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Floor.vue?vue&type=style&index=0&id=9dfea6b2&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\gwssi\\\\Desktop\\\\vue3-cookbook\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-9dfea6b2\"]])\n\nexport default __exports__","<template>\r\n  <div id=\"figure\" :style=\"{ width: figure.width + 'px', height: figure.height + 'px', left: figure.left + 'px' }\">\r\n    国伟\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, watch } from \"vue\";\r\nimport { onBeforeRouteLeave } from \"vue-router\";\r\nimport { useStore } from \"vuex\";\r\nconst store = useStore();\r\n\r\nconst jumpUp = ref(null);\r\nconst jumpDown = ref(null);\r\nconst jumpHeight = ref(600);\r\nconst jumpPoor = ref(100);\r\nconst brick = computed(() => store.state.game.brick);\r\nconst figure = computed(() => store.state.game.figure);\r\nconst game = computed(() => store.state.game.game);\r\n\r\nwatch(\r\n  game,\r\n  (val) => {\r\n    if (!val.start) {\r\n      jumpHeight.value = 600;\r\n      jumpPoor.value = 100;\r\n    } else {\r\n      if (val.score === 0) return\r\n      if (jumpHeight.value <= 200) {\r\n        jumpPoor.value = 10;\r\n      }\r\n      jumpHeight.value = jumpHeight.value - jumpPoor.value;\r\n    }\r\n  },\r\n  { deep: true }\r\n);\r\n\r\nconst figureJump = () => {\r\n  figure.value.bottom += figure.value.speed;\r\n  document.getElementById(\"figure\").style.bottom = figure.value.bottom + \"px\";\r\n  jumpUp.value = requestAnimationFrame(figureJump);\r\n};\r\n\r\nconst figureDown = () => {\r\n  figure.value.bottom -= figure.value.speed;\r\n  document.getElementById(\"figure\").style.bottom = figure.value.bottom + \"px\";\r\n  jumpDown.value = requestAnimationFrame(figureDown);\r\n  if (figure.value.bottom <= brick.value.height) {\r\n    cancelAnimationFrame(jumpDown.value);\r\n    jumpDown.value = null;\r\n  }\r\n};\r\n\r\nconst moveFn = (e) => {\r\n  // 移动\r\n  if (e.keyCode === 32) {\r\n    if (!game.value.start) return;\r\n    if (jumpUp.value || jumpDown.value) return;\r\n    figure.value.bottom = brick.value.height;\r\n    jumpUp.value = requestAnimationFrame(figureJump);\r\n    setTimeout(() => {\r\n      cancelAnimationFrame(jumpUp.value);\r\n      jumpUp.value = null;\r\n      jumpDown.value = requestAnimationFrame(figureDown);\r\n    }, jumpHeight.value);\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  let figureDom = document.getElementById(\"figure\");\r\n  if (!figureDom) return;\r\n  figureDom.style.bottom = brick.value.height + \"px\";\r\n  document.addEventListener(\"keydown\", moveFn);\r\n});\r\n\r\nonBeforeRouteLeave((to, from) => {\r\n  if (jumpDown.value) {\r\n    cancelAnimationFrame(jumpDown.value);\r\n  }\r\n  if (jumpUp.value) {\r\n    cancelAnimationFrame(jumpUp.value);\r\n  }\r\n  document.removeEventListener(\"keydown\", moveFn);\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#figure {\r\n  position: absolute;\r\n  font-size: 14px;\r\n  text-align: center;\r\n  background-color: aqua;\r\n}\r\n</style>\r\n","import script from \"./Figure.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Figure.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Figure.vue?vue&type=style&index=0&id=12797145&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\gwssi\\\\Desktop\\\\vue3-cookbook\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-12797145\"]])\n\nexport default __exports__","<template>\r\n  <div\r\n    class=\"enemy\"\r\n    id=\"enemy\"\r\n    :style=\"{ width: enemy.width + 'px', height: enemy.height + 'px', right: enemy.right + 'px' }\"\r\n  >\r\n    杆\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, watch } from \"vue\";\r\nimport { onBeforeRouteLeave } from \"vue-router\";\r\nimport { ElNotification } from \"element-plus\";\r\nimport loadsh from \"lodash\";\r\nimport { useStore } from \"vuex\";\r\nconst store = useStore();\r\n\r\nconst brick = computed(() => store.state.game.brick);\r\nconst game = computed(() => store.state.game.game);\r\nconst figure = computed(() => store.state.game.figure);\r\nconst enemy = computed(() => store.state.game.enemy);\r\n\r\nconst enemyClone = ref();\r\n\r\nconst attack = ref(null);\r\n\r\nwatch(enemy.value, (val) => {\r\n  if (val.currentLeft <= 31 && val.currentLeft >= -7) {\r\n    // 碰撞\r\n    if (figure.value.bottom <= enemy.value.height + brick.value.height) {\r\n      successAttack();\r\n    }\r\n  }\r\n});\r\n\r\n// 过关失败：重置共计、分数清零、记录最高分\r\nconst successAttack = () => {\r\n  cancelAnimationFrame(attack.value);\r\n  attack.value = null;\r\n  enemy.value.speed = enemyClone.value.speed;\r\n  enemy.value.right = enemyClone.value.right;\r\n  enemy.value.currentLeft = document.getElementById(\"enemy\").offsetLeft;\r\n  document.getElementById(\"enemy\").style.right = enemy.value.right + \"px\";\r\n  if (game.value.score > game.value.maxScore) {\r\n    store.commit(\"game/setGameMaxScore\", game.value.score);\r\n  }\r\n  store.commit(\"game/setGameScore\", 0);\r\n  store.commit(\"game/setGameStart\", false);\r\n};\r\n\r\n// 过关成功：重置攻击、加分、加速\r\nconst resetAttack = () => {\r\n  cancelAnimationFrame(attack.value);\r\n  attack.value = null;\r\n  enemy.value.right = enemyClone.value.right;\r\n  document.getElementById(\"enemy\").style.right = enemy.value.right + \"px\";\r\n  store.commit(\"game/setGameScore\", (game.value.score += 1));\r\n  enemy.value.currentLeft = document.getElementById(\"enemy\").offsetLeft;\r\n  if (game.value.score === game.value.finalScore) {\r\n    store.commit(\"game/setGameStart\", false);\r\n    enemy.value.speed = enemyClone.value.speed;\r\n  } else {\r\n    enemy.value.speed += enemy.value.speedAdd;\r\n    ElNotification({\r\n      title: \"过关成功\",\r\n      message: \"按空格开始下一关！\",\r\n      type: \"success\",\r\n      duration: 3000,\r\n    });\r\n  }\r\n};\r\n\r\n// 敌人前进\r\nconst enemyPush = () => {\r\n  const mapWidth = document.getElementById(\"map\").offsetWidth;\r\n  enemy.value.right += enemy.value.speed;\r\n  enemy.value.currentLeft = mapWidth - enemy.value.right - enemy.value.width;\r\n  document.getElementById(\"enemy\").style.right = enemy.value.right + \"px\";\r\n  attack.value = requestAnimationFrame(enemyPush);\r\n  if (enemy.value.right >= mapWidth) {\r\n    if (enemy.value.right !== enemyClone.value.right) {\r\n      resetAttack();\r\n    }\r\n  }\r\n};\r\n\r\nconst jumpFn = (e) => {\r\n  if (e.keyCode === 32) {\r\n    if (!game.value.start) return;\r\n    if (attack.value) return;\r\n    attack.value = requestAnimationFrame(enemyPush);\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  let enemyDom = document.getElementById(\"enemy\");\r\n  if (!enemyDom) return;\r\n  enemyClone.value = loadsh.cloneDeep(enemy.value);\r\n  enemyDom.style.bottom = brick.value.height + \"px\";\r\n  enemy.value.currentLeft = document.getElementById(\"enemy\").offsetLeft;\r\n  document.addEventListener(\"keydown\", jumpFn);\r\n});\r\n\r\nonBeforeRouteLeave((to, from) => {\r\n  if (attack.value) {\r\n    cancelAnimationFrame(attack.value);\r\n  }\r\n  document.removeEventListener(\"keydown\", jumpFn);\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#enemy {\r\n  position: absolute;\r\n  font-size: 20px;\r\n  text-align: center;\r\n  background-color: cadetblue;\r\n}\r\n</style>\r\n","import script from \"./Enemy.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Enemy.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Enemy.vue?vue&type=style&index=0&id=f6f1c4ec&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\gwssi\\\\Desktop\\\\vue3-cookbook\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-f6f1c4ec\"]])\n\nexport default __exports__","<template>\r\n  <div id=\"score\">\r\n    <p>最高关卡：{{ game.maxScore }}</p>\r\n    <p>当前关卡：{{ game.score }}</p>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nconst store = useStore();\r\n\r\nconst game = computed(() => store.state.game.game);\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#score {\r\n  position: absolute;\r\n  top: 10px;\r\n  right: 20px;\r\n}\r\n</style>\r\n","import script from \"./Score.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Score.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Score.vue?vue&type=style&index=0&id=19a527bb&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\gwssi\\\\Desktop\\\\vue3-cookbook\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-19a527bb\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"config\">\r\n    <p>游戏属性：{{ game }}</p>\r\n    <p>地砖属性：{{ brick }}</p>\r\n    <p>人物属性：{{ figure }}</p>\r\n    <p>敌人属性：{{ enemy }}</p>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nconst store = useStore();\r\n\r\nconst brick = computed(() => store.state.game.brick);\r\nconst game = computed(() => store.state.game.game);\r\nconst figure = computed(() => store.state.game.figure);\r\nconst enemy = computed(() => store.state.game.enemy);\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.config {\r\n  font-size: 13px;\r\n}\r\n</style>\r\n","import script from \"./Config.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Config.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Config.vue?vue&type=style&index=0&id=254013fc&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\gwssi\\\\Desktop\\\\vue3-cookbook\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-254013fc\"]])\n\nexport default __exports__","<template>\r\n  <div id=\"fail\" class=\"flex flex-col items-center justify-center\" v-if=\"!game.start\">\r\n    <template v-if=\"game.score < game.finalScore\">\r\n      <p>你被绊倒了，请重新来过。</p>\r\n      <el-button class=\"mt-4\" @click=\"handleStart\">再来一局</el-button>\r\n    </template>\r\n    <template v-else>\r\n      <p>恭喜你，通过全部{{game.finalScore}}关！</p>\r\n      <el-button class=\"mt-4\" @click=\"handleReStart\">重新开始</el-button>\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from \"vue\";\r\nimport loadsh from \"lodash\";\r\nimport { useStore } from \"vuex\";\r\nconst store = useStore();\r\n\r\nconst game = computed(() => store.state.game.game);\r\nconst gameClone = ref();\r\n\r\nonMounted(() => {\r\n  gameClone.value = loadsh.cloneDeep(game.value);\r\n});\r\n\r\nconst handleStart = () => {\r\n  store.commit(\"game/setGameStart\", true);\r\n};\r\nconst handleReStart = () => {\r\n  store.commit(\"game/setGameScore\", 0);\r\n  store.commit(\"game/setGameMaxScore\", 0);\r\n  store.commit(\"game/setGameStart\", true);\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#fail {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(255, 255, 255, 0.85);\r\n}\r\n</style>\r\n","import script from \"./Fail.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Fail.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Fail.vue?vue&type=style&index=0&id=00a46d30&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\gwssi\\\\Desktop\\\\vue3-cookbook\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-00a46d30\"]])\n\nexport default __exports__","<template>\r\n  <div id=\"map\">\r\n    <!-- 配置框 -->\r\n    <Config />\r\n    <!-- 分数 -->\r\n    <Score />\r\n    <!-- 人物 -->\r\n    <Figure />\r\n    <!-- 敌人 -->\r\n    <Enemy />\r\n    <!-- 路面 -->\r\n    <Floor />\r\n    <!-- 失败 -->\r\n    <Fail />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed } from \"vue\";\r\nimport Floor from \"./Floor\";\r\nimport Figure from \"./Figure\";\r\nimport Enemy from \"./Enemy\";\r\nimport Score from \"./Score\";\r\nimport Config from \"./Config\";\r\nimport Fail from \"./Fail\";\r\n\r\nimport { useStore } from \"vuex\";\r\nconst store = useStore();\r\n\r\nconst game = computed(() => store.state.game.game);\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#map {\r\n  position: relative;\r\n  border: 2px solid #000;\r\n  margin: 0 auto;\r\n  width: 800px;\r\n  height: 500px;\r\n  overflow: hidden;\r\n}\r\n</style>\r\n","import script from \"./GameMap.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./GameMap.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./GameMap.vue?vue&type=style&index=0&id=10388f0b&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\gwssi\\\\Desktop\\\\vue3-cookbook\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-10388f0b\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"introduce\">\r\n    <p class=\"mb-4 text-center font-semibold\">国伟立定跳</p>\r\n    <p>玩法简介：按空格开始本关（或下一关），通过按空格让“国伟”跳起来跨越栏杆，跨越成功即算过关。</p>\r\n  </div>\r\n  <Map />\r\n</template>\r\n\r\n<script setup>\r\nimport Map from \"./components/GameMap.vue\";\r\nimport { ref, onMounted, computed } from \"vue\";\r\nimport { onBeforeRouteLeave } from \"vue-router\";\r\nimport loadsh from \"lodash\";\r\nimport { useStore } from \"vuex\";\r\nconst store = useStore();\r\n\r\nconst state = computed(() => store.state.game);\r\nconst stateClone = ref();\r\n\r\nonMounted(() => {\r\n  stateClone.value = loadsh.cloneDeep(state.value);\r\n});\r\n\r\nonBeforeRouteLeave((to, from) => {\r\n  store.commit(\"game/resetAllState\", stateClone.value);\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.introduce {\r\n  width: 800px;\r\n  margin: 0 auto;\r\n  margin-bottom: 1rem;\r\n}\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=d9eb85fa&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\gwssi\\\\Desktop\\\\vue3-cookbook\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d9eb85fa\"]])\n\nexport default __exports__","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Enemy.vue?vue&type=style&index=0&id=f6f1c4ec&lang=scss&scoped=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Figure.vue?vue&type=style&index=0&id=12797145&lang=scss&scoped=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Score.vue?vue&type=style&index=0&id=19a527bb&lang=scss&scoped=true\""],"sourceRoot":""}